{#if active}
<div id="tab-number-hint">
    {#each numberOffsets as offset, i} {#if i < 9} 
       <span class="number l-orange" style="left:{offset}px">{i + 1}</span>
    {/if} {/each}
</div>
{/if}

<style>
    #tab-number-hint {
        position: absolute;
        top: 0;
        height: calc(var(--toolbar-height) - var(--panel-border-thickness));
        width: 100%;
        z-index: 220;
        background: var(--panel-color);
    }

    .number {
        position: absolute;
        line-height: var(--toolbar-height);
        width: 30px;
        text-align: center;
    }

</style>

<script>
    import { beforeUpdate } from 'svelte'

    import g from '../lib/Globals'
    
    export let active = false,
        numberOffsets = []

    // [svelte-upgrade warning]
    // beforeUpdate and afterUpdate handlers behave
    // differently to their v2 counterparts
    beforeUpdate(() => {
//        if (changed.active) {
//            if (!current.active) return
//            const activePanel = g.focusStack[0]
//            if (!activePanel || !activePanel.tabBar) return
//            let children = activePanel.tabBar.refs.tabBar.childNodes
//            // remove resizeSensor
//            children = [...children].filter(child => child.classList.contains('tab'))
//            if (children.length < 2) {
//                active = false
//            }
//            numberOffsets = children.map(tab => {
//                    const rect = tab.getBoundingClientRect()
//                    return (rect.left + rect.right) / 2 - 15
//                })
//        }
    })
</script>
