{#if open}
<div ref:keymapSettings id="keymap-settings" class="popup from-top" style="left: calc({left}px - 12.5rem);">
    <div class="container">
        <div class="title">Keymap Settings</div>
        <div class="option" class:checked="layeredKeyboardControlEnabled" on:click="toggle('layeredKeyboardControlEnabled')">
            <i class="checkbox fas"/>
            <span class="description">Enable layered keyboard control</span>
        </div>
        {#if layeredKeyboardControlEnabled}
        <div class="option" class:checked="keymapHint" on:click="toggle('keymapHint')">
            <i class="checkbox fas"/>
            <span class="description">Show keymap hint</span>
        </div>
        {/if}
    </div>
</div>
{/if}


<style>


</style>


<script>
    import g from '../lib/Globals'

    export default {
        components: {},
        oncreate() {
            g.keymapSettings = this
        },
        onstate({ changed, current }) {
            if (changed.open && g.toolbar) {
                g.app.set({
                    popup: current.open ? this : null
                })
            }
            if (changed.layeredKeyboardControlEnabled && current.layeredKeyboardControlEnabled && current.keymapHint) {
                this.set({
                    keymapHint: false
                })
            }
        },
        data() {
            return {
                open: false,
                left: 0,
                layeredKeyboardControlEnabled: true,
                keymapHint: false,
            }
        },
        methods: {
            toggle(name) {
                const value = this.get()[name]
                this.set({
                    [name]: !value
                })
            }
        }
    }

</script>
