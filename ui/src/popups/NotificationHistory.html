{#if open}
<div ref:notificationHistory id="notification-history" class="popup" style="left: calc({left}px - 15rem);">
    <div class="container">
        {#each items as {level, message}}
        <div class="item {level}">{@html message}</div>
        {:else}
        <div id="no-notifications">
            No Notifications
        </div>
        {/each}
    </div>
</div>
{/if}


<style>
    #notification-history {
        right: 0.5rem;
        top: calc(var(--toolbar-height) + 0.5rem);
        width: 30rem;
        min-height: 10rem;
        max-height: 40rem;
    }

    .container {
        min-height: 10rem;
        max-height: 39rem;
        overflow-y: scroll;
        margin: .5rem 0;
        font-weight: 400;
    }

    #no-notifications {
        text-align: center;
        color: var(--gray5);
        padding-top: 4rem;
        user-select: none;
    }

    .item {
        line-height: var(--toolbar-height);
        padding: 0 1rem;
    }
    
    .item:nth-child(even) {
        background: #DDE4ED;
    }

    .item:hover {
        background: #C5D6ED;
    }

    /* https://leaverou.github.io/bubbly/ */

    #notification-history:after {
        content: '';
        position: absolute;
        top: 0;
        right: 14.5rem;
        width: 0;
        height: 0;
        border: 0.5rem solid transparent;
        border-bottom-color: var(--popup-bg-color);
        border-top: 0;
        margin-top: -0.5rem;
    }

    .question {
        color: var(--darker-blue);
        border-left: 1rem solid var(--blue);
    }

    .success {
        color: var(--darker-green);
        border-left: 1rem solid var(--green);
    }

    .warning {
        color: var(--darker-yellow);
        border-left: 1rem solid var(--yellow);
    }

    .error {
        color: var(--darker-red);
        border-left: 1rem solid var(--red);
    }

</style>


<script>
    import g from '../lib/Globals'

    export default {
        components: {},
        oncreate() {
            g.notificationHistory = this
        },
        onstate({ changed, current }) {
            if (changed.open && g.toolbar) {
                g.app.set({
                    popup: current.open ? this : null
                })
            }
        },
        data() {
            return {
                open: false,
                left: 0,
                items: [
                    // {
                    //     level: 'success',
                    //     message: 'looking good'
                    // }
                ]
            }
        },
        methods: {}
    }

</script>
