<div ref:button class="non-selectable" class:active class:flashing style="{roundCorners(corner)}" class:coalesced="corner.startsWith('00')" on:click aria-label="{title}">
    <slot></slot>
</div>


<style>
    div {
        display: inline-block;
        background: var(--gray2);
        color: var(--basic-ui-font-color);
        border: .07rem solid var(--gray1);
        outline: none;
        padding: .4rem 0 .3rem 0;
        flex-grow: 10;
        text-align: center;
    }

    div.coalesced {
        border-top: none;
    }

    div.flashing,
    div:hover {
        filter: brightness(1.2);
    }

    div.flashing,
    div:active,
    div.active {
        background: var(--primary5);
        border-color: var(--primary2);
    }

</style>


<script>
    import g from './Globals'
    import { schedule } from './Utils'
    import { roundCorners } from './UIUtils'

    export default {
        components: {},
        oncreate() {
            const { title } = this.get()
            if (title) {
                schedule(() => {
                    g.tooltip.register(this.refs.button)
                })
            }
        },
        data() {
            return {
                active: false,
                flashing: false,
                corner: '0000',
                callback: null,
                title: '',
            }
        },
        helpers: {
            roundCorners,
        },
        methods: {
            onClick() {
                this.get().callback()
            },
            flash() {
                this.set({ flashing: true })
                setTimeout(() => {
                    this.set({ flashing: false })
                }, 128)
            }
        }
    }

</script>
