<div class="text-input {theme}" class:coalesced class:padded>
    <span class="label">
        <slot></slot>
    </span>
    <input bind:this={input} type="text" spellcheck="false" bind:value on:click on:change on:keydown on:focus placeholder="{placeholder}">
</div>


<style>
    .text-input {
        display: flex;
        flex-wrap: wrap;
    }

    .padded {
        padding: 0 .3rem .3rem .3rem;
    }

    .text-input.coalesced {
        margin-bottom: 0;
        padding: 0 .3rem 0 0;
    }

    .label {
        color: var(--gray7);
        padding: .4rem .4rem 0 0;
    }

    input {
        width: 5rem;
        height: 1.8rem;
        flex-grow: 1;
        background: var(--gray3);
        color: var(--basic-ui-font-color);
        box-sizing: border-box;
        border: .07rem solid var(--gray2);
        border-radius: var(--small-radius);
        padding: .3rem;
        outline: none;
    }

    :global(.bright) input {
        background: var(--gray9);
        color: inherit;
        border: none;
        border-bottom: .07rem solid var(--gray8);
        border-radius: 0;
    }

    .coalesced input {
        border-radius: var(--small-radius) var(--small-radius) 0 0;
    }

    input:hover {
        filter: brightness(1.2);
    }

    input:active,
    input:focus {
        border: .07rem solid var(--ui-highlight-color);
        border-radius: var(--small-radius);
    }

</style>

<script>
    export const allowWhiteSpace = true
    export let
        coalesced = false,
        padded = true,
        placeholder = '',
        theme = 'dark',
        value = ''

    let input

    export function focus() {
        input.focus()
        input.select()
    }
</script>
