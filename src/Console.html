<div ref:terminal id="terminal"></div>


<style>
    #terminal {
        height: 100%;
        width: 100%;
        padding: 0.4rem;
        box-sizing: border-box;
    }

    .terminal,
    .xterm-viewport {
        background: var(--panel-color);
        height: 100%;
        width: 100%;
        color: var(--basic-monospace-font-color);
        line-height: var(--basic-monospace-line-height);
    }

</style>


<script>
    import g from './lib/Globals'
    import {
        Terminal
    } from 'xterm'
    import fit from 'xterm/lib/addons/fit/fit'
    import attach from 'xterm/lib/addons/attach/attach'


    export default {
        components: {},
        oncreate() {
            g.console = this
            setTimeout(() => {
                Terminal.applyAddon(fit)
                const rem = parseFloat(getComputedStyle(document.documentElement).fontSize)
                this.terminal = new Terminal({
                    tabStopWidth: 4,
                    fontSize: 1.2 * rem,
                    fontFamily: 'Source Code Pro',
                    theme: {
                        foreground: '#CCC',
                        background: '#3F3F3F'
                    }
                })
                this.terminal.open(this.refs.terminal, false)
                this.terminal.write('blabla')
                this.terminal.on('focus', () => {
                    g.setFocus([g.panelRight, this])
                })

                this.terminal.fit()
            }, 500)
        },
        data() {
            return {}
        },
        methods: {}
    }

</script>
