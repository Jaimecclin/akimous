<div on:click="click()" ref:completionRow class="row {selected?'selected':''}">
    <div class="row-number"> {rowNumber} </div>
    <div class="row-content">{@html highlight}{#if withBraces}(){/if}</div>
    <div class="type-indicator {t}"> {t.substring(0, 1).toUpperCase()} </div>
</div>


<style>
    .row {
        height: 2rem;
    }

    .row.selected {
        background: var(--panel-color);
    }

    .row-number {
        display: inline-block;
        height: 2rem;
        width: 2rem;
        position: absolute;
        text-align: center;
        color: var(--ui-font-color);
        background: var(--gray5);
    }

    .selected .row-number {
        color: white;
        background: var(--gray4);
    }

    .row-content {
        position: absolute;
        left: 3rem;
        overflow-x: hidden;
    }

    .type-indicator {
        display: inline-block;
        height: 2rem;
        width: 2rem;
        position: absolute;
        right: 0;
        text-align: center;
        color: var(--brighter-ui-font-color);
    }

    .selected .type-indicator {
        color: white;
    }

    :global(.row-content > em) {
        font-style: normal;
        font-weight: bold;
        color: white;
    }

    .type-indicator.instruction {
        background: var(--gray6);
    }

    .type-indicator.class {
        background: var(--darker-orange);
    }

    .type-indicator.function {
        background: var(--darker-yellow);
    }

    .type-indicator.instance {
        background: var(--darker-green);
    }

    .type-indicator.keyword {
        background: var(--darker-red);
    }

    .type-indicator.module {
        background: var(--darker-blue);
    }

    .type-indicator.param {
        background: var(--darker-purple);
    }

    .type-indicator.statement {
        background: var(--darker-ao);
    }

    .selected .type-indicator.instruction {
        background: var(--gray5);
    }

    .selected .type-indicator.class {
        background: var(--orange);
    }

    .selected .type-indicator.function {
        background: var(--yellow);
    }

    .selected .type-indicator.instance {
        background: var(--green);
    }

    .selected .type-indicator.keyword {
        background: var(--red);
    }

    .selected .type-indicator.module {
        background: var(--blue);
    }

    .selected .type-indicator.param {
        background: var(--purple);
    }

    .selected .type-indicator.statement {
        background: var(--ao);
    }

</style>


<script>
    // import g from '../../lib/Globals'

    export default {
        components: {},
        oncreate() {},
        data() {
            return {
                c: '', // completion text
                t: '', // completion type
                highlight: '',
                rowNumber: 0,
                selected: false,
                index: 0
            }
        },
        methods: {
            click() {
                const { parent } = this.get()
                parent.set({ selectedCompletionRow: this })
                parent.enter()
            }
        },
        computed: {
            withBraces: ({ parent, t }) => {
                if (t === 'function') return true
                if (t === 'class' && !parent.predictor.isClassDefinition) return true
                return false
            }
        }
    }

</script>
