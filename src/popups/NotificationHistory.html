{#if open}
<div ref:notificationHistory id="notification-history">
    <div class="container">
        {#if items.length===0}
        <div id="no-notifications">
            No Notifications
        </div> {/if} {#each items as item}
        <div class="item {item.level}">{@html item.message}</div>
        {/each}
    </div>
</div>
{/if}


<style>
    #notification-history {
        position: absolute;
        right: 0.5rem;
        top: calc(var(--toolbar-height) + 0.5rem);
        width: var(--bubble-width);
        min-height: 10rem;
        max-height: 40rem;
        z-index: 11;
        background: var(--modal-bg-color);
        color: var(--modal-text-color);
        box-sizing: border-box;
        border-radius: var(--default-radius);
        box-shadow: var(--default-shadow);
    }

    .container {
        min-height: 10rem;
        max-height: 39rem;
        overflow-y: scroll;
        margin: .5rem 0;
        font-weight: 400;
    }

    #no-notifications {
        text-align: center;
        color: var(--gray5);
        padding-top: 4rem;
        user-select: none;
    }

    .item:nth-child(even) {
        background: #DDE4ED;
    }

    .item:hover {
        background: #C5D6ED;
    }

    /* https://leaverou.github.io/bubbly/ */

    #notification-history:after {
        content: '';
        position: absolute;
        top: 0;
        right: 4.3rem;
        width: 0;
        height: 0;
        border: 0.5rem solid transparent;
        border-bottom-color: var(--modal-bg-color);
        border-top: 0;
        margin-top: -0.5rem;
    }

    .item {
        line-height: var(--toolbar-height);
        padding: 0 1rem;
    }

    .question {
        color: var(--darker-blue);
        border-left: 1rem solid var(--blue);
    }

    .success {
        color: var(--darker-green);
        border-left: 1rem solid var(--green);
    }

    .warning {
        color: var(--darker-yellow);
        border-left: 1rem solid var(--yellow);
    }

    .error {
        color: var(--darker-red);
        border-left: 1rem solid var(--red);
    }

</style>


<script>
    import g from '../lib/Globals'

    export default {
        components: {},
        oncreate() {
            g.notificationHistory = this
        },
        onstate({ changed, current }) {
            if (changed.open && g.toolbar) {
                g.app.set({
                    popup: current.open ? this : null
                })
            }
        },
        data() {
            return {
                open: false,
                items: [
                    // {
                    //     level: 'success',
                    //     message: 'looking good'
                    // }
                ]
            }
        },
        methods: {}
    }

</script>
