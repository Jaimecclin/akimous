{#if open}
<div ref:self id="keyboard-control-hint">
    <div id="hint-description">{@html description}</div>
    <ul class="row">
        <li class="key fn" id="key-Escape" on:mouseover="showDescription('Escape')">esc</li>
        <li class="key fn" id="key-F1" on:mouseover="showDescription('F1')">F1</li>
        <li class="key fn" id="key-F2" on:mouseover="showDescription('F2')">F2</li>
        <li class="key fn" id="key-F3" on:mouseover="showDescription('F3')">F3</li>
        <li class="key fn" id="key-F4" on:mouseover="showDescription('F4')">F4</li>
        <li class="key fn" id="key-F5" on:mouseover="showDescription('F5')">F5</li>
        <li class="key fn" id="key-F6" on:mouseover="showDescription('F6')">F6</li>
        <li class="key fn" id="key-F7" on:mouseover="showDescription('F7')">F7</li>
        <li class="key fn" id="key-F8" on:mouseover="showDescription('F8')">F8</li>
        <li class="key fn" id="key-F9" on:mouseover="showDescription('F9')">F9</li>
        <li class="key fn" id="key-F10" on:mouseover="showDescription('F10')">F10</li>
        <li class="key fn" id="key-F11" on:mouseover="showDescription('F11')">F11</li>
        <li class="key fn" id="key-F12" on:mouseover="showDescription('F12')">F12</li>
        <li class="key fn" id="key-Delete" on:mouseover="showDescription('Delete')">{@html keys[mode].delete}</li>
    </ul>
    <ul class="row">
        <li class="key" id="key-Backquote" on:mouseover="showDescription('Backquote')"><span>`</span></li>
        <li class="key" id="key-digit1" on:mouseover="showDescription('digit1')"><span>{@html keys[mode]['1']}</span></li>
        <li class="key" id="key-digit2" on:mouseover="showDescription('digit2')"><span>{@html keys[mode]['2']}</span></li>
        <li class="key" id="key-digit3" on:mouseover="showDescription('digit3')"><span>{@html keys[mode]['3']}</span></li>
        <li class="key" id="key-digit4" on:mouseover="showDescription('digit4')"><span>{@html keys[mode]['4']}</span></li>
        <li class="key" id="key-digit5" on:mouseover="showDescription('digit5')"><span>{@html keys[mode]['5']}</span></li>
        <li class="key" id="key-digit6" on:mouseover="showDescription('digit6')"><span>{@html keys[mode]['6']}</span></li>
        <li class="key" id="key-digit7" on:mouseover="showDescription('digit7')"><span>{@html keys[mode]['7']}</span></li>
        <li class="key" id="key-digit8" on:mouseover="showDescription('digit8')"><span>8</span></li>
        <li class="key" id="key-digit9" on:mouseover="showDescription('digit9')"><span>9</span></li>
        <li class="key" id="key-digit0" on:mouseover="showDescription('digit0')"><span>0</span></li>
        <li class="key" id="key-Minus" on:mouseover="showDescription('Minus')"><span>-</span></li>
        <li class="key" id="key-Equal" on:mouseover="showDescription('Equal')"><span>=</span></li>
        <li class="key" id="key-Backspace" on:mouseover="showDescription('Backspace')">{@html keys[mode].backspace}</li>
    </ul>
    <ul class="row">
        <li class="key" id="key-Tab" on:mouseover="showDescription('Tab')">⇥</li>
        <li class="key" id="key-Q" on:mouseover="showDescription('Q')"></li>
        <li class="key" id="key-W" on:mouseover="showDescription('W')">{@html keys[mode].w}</li>
        <li class="key" id="key-E" on:mouseover="showDescription('E')">{@html keys[mode].e}</li>
        <li class="key" id="key-R" on:mouseover="showDescription('R')">{@html keys[mode].r}</li>
        <li class="key" id="key-T" on:mouseover="showDescription('T')">{@html keys[mode].t}</li>
        <li class="key" id="key-Y" on:mouseover="showDescription('Y')">{@html keys[mode].y}</li>
        <li class="key" id="key-U" on:mouseover="showDescription('U')">{@html keys[mode].u}</li>
        <li class="key" id="key-I" on:mouseover="showDescription('I')">{@html keys[mode].i}</li>
        <li class="key" id="key-O" on:mouseover="showDescription('O')">{@html keys[mode].o}</li>
        <li class="key" id="key-P" on:mouseover="showDescription('P')">{@html keys[mode].p}</li>
        <li class="key" id="key-BracketLeft" on:mouseover="showDescription('BracketLeft')">{@html keys[mode]['[']}</li>
        <li class="key" id="key-BracketRight" on:mouseover="showDescription('BracketRight')">{@html keys[mode][']']}</li>
        <li class="key" id="key-Backslash" on:mouseover="showDescription('Backslash')"></li>
    </ul>
    <ul class="row">
        <li class="key" id="caps">⇪</li>
        <li class="key" id="key-A" on:mouseover="showDescription('A')"></li>
        <li class="key" id="key-S" on:mouseover="showDescription('S')">{@html keys[mode].s}</li>
        <li class="key" id="key-D" on:mouseover="showDescription('D')">{@html keys[mode].d}</li>
        <li class="key" id="key-F" on:mouseover="showDescription('F')">{@html keys[mode].f}</li>
        <li class="key" id="key-G" on:mouseover="showDescription('G')">{@html keys[mode].g}</li>
        <li class="key" id="key-H" on:mouseover="showDescription('H')">{@html keys[mode].h}</li>
        <li class="key" id="key-J" on:mouseover="showDescription('J')">{@html keys[mode].j}</li>
        <li class="key" id="key-K" on:mouseover="showDescription('K')">{@html keys[mode].k}</li>
        <li class="key" id="key-L" on:mouseover="showDescription('L')">{@html keys[mode].l}</li>
        <li class="key" id="key-Semicolon" on:mouseover="showDescription('Semicolon')">{@html keys[mode][';']}</li>
        <li class="key" id="key-Quote" on:mouseover="showDescription('Quote')"></li>
        <li class="key" id="key-Enter" on:mouseover="showDescription('Enter')">⏎</li>
    </ul>
    <ul class="row">
        <li class="key" id="key-ShiftLeft" on:mouseover="showDescription('ShiftLeft')"><span>⇧</span></li>
        <li class="key" id="key-Z" on:mouseover="showDescription('Z')"></li>
        <li class="key" id="key-X" on:mouseover="showDescription('X')"></li>
        <li class="key" id="key-C" on:mouseover="showDescription('C')">{@html keys[mode].c}</li>
        <li class="key" id="key-V" on:mouseover="showDescription('V')"></li>
        <li class="key" id="key-B" on:mouseover="showDescription('B')"></li>
        <li class="key" id="key-N" on:mouseover="showDescription('N')">{@html keys[mode].n}</li>
        <li class="key" id="key-M" on:mouseover="showDescription('M')">{@html keys[mode].m}</li>
        <li class="key" id="key-Comma" on:mouseover="showDescription('Comma')">{@html keys[mode][',']}</li>
        <li class="key" id="key-Period" on:mouseover="showDescription('Period')">{@html keys[mode]['.']}</li>
        <li class="key" id="key-Slash" on:mouseover="showDescription('Slash')">{@html keys[mode]['/']}</li>
        <li class="key" id="key-ShiftRight" on:mouseover="showDescription('ShiftRight')"><span>⇧</span></li>
    </ul>
    <ul class="row" id="bottomrow">
        <li class="key"><span>fn</span></li>
        <li class="key" id="key-ControlLeft" on:mouseover="showDescription('ControlLeft')"><span>⌃</span></li>
        <li class="key" id="key-AltLeft" on:mouseover="showDescription('AltLeft')"><span>⌥</span></li>
        <li class="key" id="key-MetaLeft" on:mouseover="showDescription('MetaLeft')"><span>⌘</span></li>
        <li class="key" id="key-Space" on:mouseover="showDescription('Space')"></li>
        <li class="key" id="key-MetaRight" on:mouseover="showDescription('MetaRight')"><span>⌘</span></li>
        <li class="key" id="key-AltRight" on:mouseover="showDescription('AltRight')"><span>⌥</span></li>
        <ol class="cf">
            <li class="key" id="key-ArrowLeft" on:mouseover="showDescription('ArrowLeft')"><span>◀</span></li>
            <li>
                <i class="key" id="key-ArrowUp" on:mouseover="showDescription('ArrowUp')"><span>▲</span></i>
                <i class="key" id="key-ArrowDown" on:mouseover="showDescription('ArrowDown')"><span>▼</span></i>
            </li>
            <li class="key" id="key-ArrowRight" on:mouseover="showDescription('ArrowRight')"><span>▶</span></li>
        </ol>
    </ul>
</div>
{/if}

<style>
    #keyboard-control-hint {
        position: absolute;
        background: var(--dark-color);
        bottom: 2rem;
        right: 2rem;
        height: 14.4rem;
        width: 33rem;
        z-index: 10;
        border-radius: var(--default-radius);
        box-shadow: var(--default-shadow);
        user-select: none;
        cursor: default;
    }

    #hint-description {
        height: 2rem;
        line-height: 2rem;
        text-align: center;
    }

    .row {
        padding-left: .3rem;
    }

    ul {
        list-style-type: none;
        width: 100%;
        margin: 0 auto;
        padding-left: .2rem;
    }

    li {
        float: left;
    }

    i {
        font-style: normal;
    }

    .key {
        display: block;
        color: var(--darker-ui-font-color);
        font-size: 1rem;
        text-align: center;
        text-decoration: none;
        width: 2rem;
        height: 2rem;
        line-height: 2rem;
        margin: .1rem .12rem;
        background: var(--darker-color);
        border-radius: .1rem;
        border-top: .05rem solid #444;
        border-bottom: .05rem solid black;
        box-sizing: border-box;
    }

    .fn {
        height: 1rem;
        line-height: 1rem;
        font-size: .5rem;
        margin: 0 .16rem .1rem .16rem;
        padding-top: 0;
    }

    #key-Escape {
        font-size: 0.3rem;
    }

    #key-Backspace {
        width: 3.2em;
    }

    #key-Tab {
        width: 3.2em;
    }

    #caps {
        width: 3.7rem;
    }

    #key-Enter {
        width: 3.7rem;
    }

    #key-ShiftLeft,
    #key-ShiftRight {
        width: 4.8rem;
    }

    #key-Space {
        width: 12rem;
    }

    ul ol {
        list-style-type: none;
    }

    #key-ArrowUp,
    #key-ArrowDown {
        font-size: .5rem;
        line-height: .9rem;
        height: .95rem;
    }

    #key-ArrowLeft,
    #key-ArrowRight {
        font-size: .5rem;
    }

    :global(#keyboard-control-hint div.two-lines) {
        line-height: .8rem;
        font-size: .8rem;
        padding-top: .3rem;
    }

    :global(#keyboard-control-hint .bigger) {
        line-height: 1.8rem;
        font-size: 1.5rem;
    }

    :global(#keyboard-control-hint .lower) {
        padding-top: .2rem;
    }

    :global(#keyboard-control-hint .small) {
        font-size: .75rem;
    }
    
    :global(#keyboard-control-hint .active) {
        box-shadow: var(--blue) 0 0 0 .2rem;
    }

</style>


<script>
    import g from '../lib/Globals'
    import { dragElement } from '../lib/UIUtils'

    export default {
        components: {},
        oncreate() {
            g.keyboardControlHint = this
            dragElement(this.refs.self)
        },
        data() {
            return {
                open: true,
                mode: 'normal',
                description: '',
                keys: {
                    'normal': {
                        'delete': '<div class="l-red">⌦</div>',
                        'backspace': '<div class="l-red">⌫</div>',

                        '1': '<div class="l-sandybrown">1</div>',
                        '2': '<div class="l-sandybrown">2</div>',
                        '3': '<div class="l-sandybrown">3</div>',
                        '4': '<div class="l-sandybrown">4</div>',
                        '5': '<div class="l-sandybrown">5</div>',
                        '6': '<div class="l-sandybrown">6</div>',
                        '7': '<div class="l-sandybrown">7</div>',

                        'w': '<div class="bigger l-yellow">⤉</div>',
                        'e': '<div class="bigger lower l-ao">⇞</div>',
                        'r': '<div class="bigger l-purple">—</div>',
                        't': '<i class="fas fa-square l-purple"></i>',
                        'y': '<div class="bigger l-green">⇱</div>',
                        'u': '<div class="two-lines l-green">▲<br>x5</div>',
                        'i': '<div class="l-blue">▲</div>',
                        'o': '<div class="two-lines l-green">▼<br>x5</div>',
                        'p': '<div class="bigger l-green">⇲</div>',
                        '[': '<div class="l-olive"><b>[</b></div>',
                        ']': '<div class="l-olive"><b>]</b></div>',

                        's': '<div class="bigger l-yellow">⤈</div>',
                        'd': '<div class="bigger lower l-ao">⇟</div>',
                        'f': '<i class="fas fa-mouse-pointer l-purple"></i>',
                        'g': '<b><div class="l-purple">{ }</div></b>',
                        'h': '<i class="fas fa-fast-backward l-green"></i>',
                        'j': '<div class="l-blue">◀</div>',
                        'k': '<div class="l-blue">▼</div>',
                        'l': '<div class="l-blue">▶</div>',
                        ';': '<i class="fas fa-fast-forward l-green"></i>',

                        'c': '<div class="l-orange">℄</div>',
                        'n': '<b><span class="l-purple">|</span> ||</b>',
                        'm': '<b><span class="l-blue">|</span> ||</b>',
                        ',': '<b>| <span class="l-blue">|</span> |</b>',
                        '.': '<b>|| <span class="l-blue">|</span></b>',
                        '/': '<b>|| <span class="l-purple">|</span></b>',
                    }
                },
                descriptions: {
                    'normal': {
                        'delete': 'Delete word after cursor',
                        'backspace': 'Delete word before cursor',

                        '1': 'Select the 1st item in auto-completion',
                        '2': 'Select the 2nd item in auto-completion',
                        '3': 'Select the 3rd item in auto-completion',
                        '4': 'Select the 4th item in auto-completion',
                        '5': 'Select the 5th item in auto-completion',
                        '6': 'Select the 6th item in auto-completion',
                        '7': 'Select the 7th item in auto-completion',

                        'W': 'Move Line Up',
                        'E': 'Scroll Up',
                        'R': 'Select Line',
                        'T': 'Select Block',
                        'Y': 'Move the cursor to the start of the document',
                        'U': 'Move the cursor up by 5 lines',
                        'I': 'Move the cursor up by a line',
                        'O': 'Move the cursor down by 5 lines',
                        'P': 'Move the cursor to the end of the document',
                        '[': 'Move the cursor to the opening braces/brackets/curly braces',
                        ']': 'Move the cursor to the closing braces/brackets/curly braces',

                        's': 'Move line down',
                        'd': 'Scroll down',
                        'f': 'Select word (incremental selection)',
                        'g': 'Select between braces/brackets/curly braces',
                        'h': 'Move the cursor to the start of the line',
                        'j': 'Move the cursor left by a word',
                        'k': 'Move the cursor down by a line',
                        'l': 'Move the cursor right by a word',
                        ';': 'Move the cursor to the end of the line',

                        'c': 'Move the cursor to the center line in the viewport',
                        'n': 'Toggle auto-hide of the left panel',
                        'm': 'Focus on the left panel',
                        ',': 'Focus on the editor',
                        '.': 'Focus on the right panel',
                        '/': 'Toggle auto-hide of the right panel',

                        'space': '<div class="small">Hold down the space bar and tap on one of the keys with colored icon to execute the command.</div>'
                    }
                }
            }
        },
        methods: {
            showDescription(key) {
                console.log('showDescription', key)
                const { mode, descriptions } = this.get()
                const description = descriptions[mode][key]
                this.set({ description: description ? description : '' })
                for (const element of document.querySelectorAll('#keyboard-control-hint .active')) {
                    element.classList.remove('active')
                }
                console.log(`key-${key}`, document.getElementById(`key-${key}`))
                document.getElementById(`key-${key}`).classList.add('active')
            },
            onHover(e) {
                console.log(e)
            }
        }
    }

</script>
