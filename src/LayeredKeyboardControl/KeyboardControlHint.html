{#if open}
<div ref:self id="keyboard-control-hint">
    <div id="hint-description">{@html description}</div>
    <ul class="row">
        <li class="key fn" on:mouseover="showDescription('esc')" id="esc">esc</li>
        <li class="key fn" on:mouseover="showDescription('F1')">F1</li>
        <li class="key fn" on:mouseover="showDescription('F2')">F2</li>
        <li class="key fn" on:mouseover="showDescription('F3')">F3</li>
        <li class="key fn" on:mouseover="showDescription('F4')">F4</li>
        <li class="key fn" on:mouseover="showDescription('F5')">F5</li>
        <li class="key fn" on:mouseover="showDescription('F6')">F6</li>
        <li class="key fn" on:mouseover="showDescription('F7')">F7</li>
        <li class="key fn" on:mouseover="showDescription('F8')">F8</li>
        <li class="key fn" on:mouseover="showDescription('F9')">F9</li>
        <li class="key fn" on:mouseover="showDescription('F10')">F10</li>
        <li class="key fn" on:mouseover="showDescription('F11')">F11</li>
        <li class="key fn" on:mouseover="showDescription('F12')">F12</li>
        <li class="key fn" on:mouseover="showDescription('delete')">{@html keys[mode].delete}</li>
    </ul>
    <ul class="row">
        <li class="key" on:mouseover="showDescription('·')"><span>`</span></li>
        <li class="key" on:mouseover="showDescription('1')"><span>{@html keys[mode]['1']}</span></li>
        <li class="key" on:mouseover="showDescription('2')"><span>{@html keys[mode]['2']}</span></li>
        <li class="key" on:mouseover="showDescription('3')"><span>{@html keys[mode]['3']}</span></li>
        <li class="key" on:mouseover="showDescription('4')"><span>{@html keys[mode]['4']}</span></li>
        <li class="key" on:mouseover="showDescription('5')"><span>{@html keys[mode]['5']}</span></li>
        <li class="key" on:mouseover="showDescription('6')"><span>{@html keys[mode]['6']}</span></li>
        <li class="key" on:mouseover="showDescription('7')"><span>{@html keys[mode]['7']}</span></li>
        <li class="key" on:mouseover="showDescription('8')"><span>8</span></li>
        <li class="key" on:mouseover="showDescription('9')"><span>9</span></li>
        <li class="key" on:mouseover="showDescription('0')"><span>0</span></li>
        <li class="key" on:mouseover="showDescription('-')"><span>-</span></li>
        <li class="key" on:mouseover="showDescription('=')"><span>=</span></li>
        <li class="key" on:mouseover="showDescription('backspace')" id="backspace">{@html keys[mode].backspace}</li>
    </ul>
    <ul class="row">
        <li class="key" on:mouseover="showDescription('tab')" id="tab">⇥</li>
        <li class="key" on:mouseover="showDescription('q')"></li>
        <li class="key" on:mouseover="showDescription('w')">{@html keys[mode].w}</li>
        <li class="key" on:mouseover="showDescription('e')">{@html keys[mode].e}</li>
        <li class="key" on:mouseover="showDescription('r')">{@html keys[mode].r}</li>
        <li class="key" on:mouseover="showDescription('t')">{@html keys[mode].t}</li>
        <li class="key" on:mouseover="showDescription('y')">{@html keys[mode].y}</li>
        <li class="key" on:mouseover="showDescription('u')">{@html keys[mode].u}</li>
        <li class="key" on:mouseover="showDescription('i')">{@html keys[mode].i}</li>
        <li class="key" on:mouseover="showDescription('o')">{@html keys[mode].o}</li>
        <li class="key" on:mouseover="showDescription('p')">{@html keys[mode].p}</li>
        <li class="key" on:mouseover="showDescription('[')">{@html keys[mode]['[']}</li>
        <li class="key" on:mouseover="showDescription(']')">{@html keys[mode][']']}</li>
        <li class="key" on:mouseover="showDescription('\\')"></li>
    </ul>
    <ul class="row">
        <li class="key" on:mouseover="showDescription('caps')" id="caps">⇪</li>
        <li class="key" on:mouseover="showDescription('q')"></li>
        <li class="key" on:mouseover="showDescription('s')">{@html keys[mode].s}</li>
        <li class="key" on:mouseover="showDescription('d')">{@html keys[mode].d}</li>
        <li class="key" on:mouseover="showDescription('f')">{@html keys[mode].f}</li>
        <li class="key" on:mouseover="showDescription('g')">{@html keys[mode].g}</li>
        <li class="key" on:mouseover="showDescription('h')">{@html keys[mode].h}</li>
        <li class="key" on:mouseover="showDescription('j')">{@html keys[mode].j}</li>
        <li class="key" on:mouseover="showDescription('k')">{@html keys[mode].k}</li>
        <li class="key" on:mouseover="showDescription('l')">{@html keys[mode].l}</li>
        <li class="key" on:mouseover="showDescription(';')">{@html keys[mode][';']}</li>
        <li class="key" on:mouseover="showDescription('\'')"></li>
        <li class="key" on:mouseover="showDescription('enter')" id="enter">⏎</li>
    </ul>
    <ul class="row">
        <li class="key shiftleft" on:mouseover="showDescription('shift')"><span>⇧</span></li>
        <li class="key" on:mouseover="showDescription('z')"></li>
        <li class="key" on:mouseover="showDescription('x')"></li>
        <li class="key" on:mouseover="showDescription('c')">{@html keys[mode].c}</li>
        <li class="key" on:mouseover="showDescription('v')"></li>
        <li class="key" on:mouseover="showDescription('b')"></li>
        <li class="key" on:mouseover="showDescription('n')">{@html keys[mode].n}</li>
        <li class="key" on:mouseover="showDescription('m')">{@html keys[mode].m}</li>
        <li class="key" on:mouseover="showDescription(',')">{@html keys[mode][',']}</li>
        <li class="key" on:mouseover="showDescription('.')">{@html keys[mode]['.']}</li>
        <li class="key" on:mouseover="showDescription('/')">{@html keys[mode]['/']}</li>
        <li class="key shiftright" on:mouseover="showDescription('shift')"><span>⇧</span></li>
    </ul>
    <ul class="row" id="bottomrow">
        <li class="key" on:mouseover="showDescription('fn')" id="fn"><span>fn</span></li>
        <li class="key" on:mouseover="showDescription('control')" id="control"><span>⌃</span></li>
        <li class="key" on:mouseover="showDescription('option')" id="optionleft"><span>⌥</span></li>
        <li class="key" on:mouseover="showDescription('command')" id="commandleft"><span>⌘</span></li>
        <li class="key" on:mouseover="showDescription('space')" id="spacebar"></li>
        <li class="key" on:mouseover="showDescription('command')" id="commandright"><span>⌘</span></li>
        <li class="key" on:mouseover="showDescription('option')" id="optionright"><span>⌥</span></li>
        <ol class="cf">
            <li class="key" on:mouseover="showDescription('left')" id="left"><span>◀</span></li>
            <li>
                <i class="key" on:mouseover="showDescription('up')" id="up"><span>▲</span></i>
                <i class="key" on:mouseover="showDescription('down')" id="down"><span>▼</span></i>
            </li>
            <li class="key" on:mouseover="showDescription('right')" id="right"><span>▶</span></li>
        </ol>
    </ul>
</div>
{/if}

<style>
    #keyboard-control-hint {
        position: absolute;
        background: var(--dark-color);
        bottom: 2rem;
        right: 2rem;
        height: 14.4rem;
        width: 33rem;
        z-index: 10;
        border-radius: var(--default-radius);
        box-shadow: var(--default-shadow);
        user-select: none;
        cursor: default;
    }

    #hint-description {
        height: 2rem;
        line-height: 2rem;
        text-align: center;
    }

    .row {
        padding-left: .3rem;
    }

    ul {
        list-style-type: none;
        width: 100%;
        margin: 0 auto;
        padding-left: .2rem;
    }

    li {
        float: left;
    }

    i {
        font-style: normal;
    }

    .key {
        display: block;
        color: var(--darker-ui-font-color);
        font-size: 1rem;
        text-align: center;
        text-decoration: none;
        width: 2rem;
        height: 2rem;
        line-height: 2rem;
        margin: .1rem .12rem;
        background: var(--darker-color);
        border-radius: .1rem;
        border-top: .05rem solid #444;
        border-bottom: .05rem solid black;
        box-sizing: border-box;
    }

    .fn {
        height: 1rem;
        line-height: 1rem;
        font-size: .5rem;
        margin: 0 .16rem .1rem .16rem;
        padding-top: 0;
    }

    #esc {
        font-size: 0.3rem;
    }

    #backspace {
        width: 3.2em;
    }

    #tab {
        width: 3.2em;
    }

    #caps {
        width: 3.7rem;
    }

    #enter {
        width: 3.7rem;
    }

    .shiftleft,
    .shiftright {
        width: 4.8rem;
    }

    #spacebar {
        width: 12rem;
    }

    ul ol {
        list-style-type: none;
    }

    #up,
    #down {
        font-size: .5rem;
        line-height: .9rem;
        height: .95rem;
    }

    #left,
    #right {
        font-size: .5rem;
    }

    .key:hover {
        box-shadow: var(--blue) 0 0 0 .2rem;
    }

    :global(#keyboard-control-hint div.two-lines) {
        line-height: .8rem;
        font-size: .8rem;
        padding-top: .3rem;
    }

    :global(#keyboard-control-hint .bigger) {
        line-height: 1.8rem;
        font-size: 1.5rem;
    }

    :global(#keyboard-control-hint .lower) {
        padding-top: .2rem;
    }

    :global(#keyboard-control-hint .small) {
        font-size: .75rem;
    }

</style>


<script>
    import g from '../lib/Globals'
    import { dragElement } from '../lib/UIUtils'

    export default {
        components: {},
        oncreate() {
            g.keyboardControlHint = this
            dragElement(this.refs.self)
        },
        data() {
            return {
                open: true,
                mode: 'normal',
                description: '',
                keys: {
                    'normal': {
                        'delete': '<div class="l-red">⌦</div>',
                        'backspace': '<div class="l-red">⌫</div>',

                        '1': '<div class="l-sandybrown">1</div>',
                        '2': '<div class="l-sandybrown">2</div>',
                        '3': '<div class="l-sandybrown">3</div>',
                        '4': '<div class="l-sandybrown">4</div>',
                        '5': '<div class="l-sandybrown">5</div>',
                        '6': '<div class="l-sandybrown">6</div>',
                        '7': '<div class="l-sandybrown">7</div>',

                        'w': '<div class="bigger l-yellow">⤉</div>',
                        'e': '<div class="bigger lower l-ao">⇞</div>',
                        'r': '<div class="bigger l-purple">—</div>',
                        't': '<i class="fas fa-square l-purple"></i>',
                        'y': '<div class="bigger l-green">⇱</div>',
                        'u': '<div class="two-lines l-green">▲<br>x5</div>',
                        'i': '<div class="l-blue">▲</div>',
                        'o': '<div class="two-lines l-green">▼<br>x5</div>',
                        'p': '<div class="bigger l-green">⇲</div>',
                        '[': '<div class="l-olive"><b>[</b></div>',
                        ']': '<div class="l-olive"><b>]</b></div>',

                        's': '<div class="bigger l-yellow">⤈</div>',
                        'd': '<div class="bigger lower l-ao">⇟</div>',
                        'f': '<i class="fas fa-mouse-pointer l-purple"></i>',
                        'g': '<b><div class="l-purple">{ }</div></b>',
                        'h': '<i class="fas fa-fast-backward l-green"></i>',
                        'j': '<div class="l-blue">◀</div>',
                        'k': '<div class="l-blue">▼</div>',
                        'l': '<div class="l-blue">▶</div>',
                        ';': '<i class="fas fa-fast-forward l-green"></i>',

                        'c': '<div class="l-orange">℄</div>',
                        'n': '<b><span class="l-purple">|</span> ||</b>',
                        'm': '<b><span class="l-blue">|</span> ||</b>',
                        ',': '<b>| <span class="l-blue">|</span> |</b>',
                        '.': '<b>|| <span class="l-blue">|</span></b>',
                        '/': '<b>|| <span class="l-purple">|</span></b>',
                    }
                },
                descriptions: {
                    'normal': {
                        'delete': 'Delete word after cursor',
                        'backspace': 'Delete word before cursor',

                        '1': 'Select the 1st item in auto-completion',
                        '2': 'Select the 2nd item in auto-completion',
                        '3': 'Select the 3rd item in auto-completion',
                        '4': 'Select the 4th item in auto-completion',
                        '5': 'Select the 5th item in auto-completion',
                        '6': 'Select the 6th item in auto-completion',
                        '7': 'Select the 7th item in auto-completion',

                        'w': 'Move Line Up',
                        'e': 'Scroll Up',
                        'r': 'Select Line',
                        't': 'Select Block',
                        'y': 'Move the cursor to the start of the document',
                        'u': 'Move the cursor up by 5 lines',
                        'i': 'Move the cursor up by a line',
                        'o': 'Move the cursor down by 5 lines',
                        'p': 'Move the cursor to the end of the document',
                        '[': 'Move the cursor to the opening braces/brackets/curly braces',
                        ']': 'Move the cursor to the closing braces/brackets/curly braces',

                        's': 'Move line down',
                        'd': 'Scroll down',
                        'f': 'Select word (incremental selection)',
                        'g': 'Select between braces/brackets/curly braces',
                        'h': 'Move the cursor to the start of the line',
                        'j': 'Move the cursor left by a word',
                        'k': 'Move the cursor down by a line',
                        'l': 'Move the cursor right by a word',
                        ';': 'Move the cursor to the end of the line',

                        'c': 'Move the cursor to the center line in the viewport',
                        'n': 'Toggle auto-hide of the left panel',
                        'm': 'Focus on the left panel',
                        ',': 'Focus on the editor',
                        '.': 'Focus on the right panel',
                        '/': 'Toggle auto-hide of the right panel',

                        'space': '<div class="small">Hold down the space bar and tap on one of the keys with colored icon to execute the command.</div>'
                    }
                }
            }
        },
        methods: {
            showDescription(key) {
                console.log({key})
                const { mode, descriptions } = this.get()
                const description = descriptions[mode][key]
                this.set({ description: description ? description : '' })
            }
        }
    }

</script>
