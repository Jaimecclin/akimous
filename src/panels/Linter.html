<div class="container {active?'':'gone'}">
    <div ref:linter id="linter">
        <div class="title non-selectable">Pylint</div>
        <table id="pylint-result" class="non-selectable">
            {#each fullLintingResult as message}
            <tr on:click="jumpTo(message.line, message.column)">
                <td class="line-number">{message.line}</td>
                <td>
                    <div class="message">{message.message}</div>
                </td>
            </tr>
            {/each}
        </table>
    </div>
</div>

<style>
    .container {
        height: calc(100% - var(--indicator-height) - .1rem);
    }

    #linter {
        height: calc(100% - var(--indicator-height) - .1rem);
        overflow-y: scroll;
    }

    .title {
        padding: .3rem;
        color: var(--gray3);
        font-size: var(--ui-font-size-large);
    }

    #pylint-result {
        width: 100%;
        background: var(--main-bg-color);
    }

    table,
    td {
        padding: 0;
        margin: 0;
        border-spacing: 0;
    }

    td {
        vertical-align: top;
        cursor: default;
        border-bottom: 1px solid var(--panel-delimiter-color);
    }

    tr:hover {
        color: white;
        background: var(--gray4);
    }

    .line-number {
        width: 1rem;
        padding: .3rem;
        text-align: right;
        color: var(--ui-font-color);
        background: var(--gray5);
        font-family: var(--basic-monospace-font-family);
    }

    tr:hover>.line-number {
        color: white;
        background: var(--ui-highlight-color);
    }

    .message {
        padding: .3rem .5rem;
        max-height: 3.8rem;
        white-space: pre;
        overflow: hidden;
    }

</style>


<script>
    import g from '../lib/Globals'
    import { initializeTabView } from '../lib/Utils'

    export default {
        components: {},
        oncreate() {
            g.linter = this
            initializeTabView(this, 'Linter', 'fas fa-check-circle l-green')
        },
        data() {
            return {
                active: false,
                fullLintingResult: []
            }
        },
        methods: {
            jumpTo(line, ch) {
                const editor = g.activeEditor
                if (!editor) return
                g.activeEditor.cm.setCursor(line - 1, ch)
                editor.cm.focus()

            }
        }
    }

</script>
