<div ref:tabBar class="tab-bar">

</div>


<style>
    .tab-bar {
        width: 100%;
        height: var(--tab-bar-height);
        background: var(--panel-color);
        border-bottom: var(--panel-border);
        white-space: nowrap;
        overflow: hidden;
    }

</style>


<script>
    // import g from '../lib/Globals'
    import Tab from './Tab.html'
    import Sortable from 'sortablejs'

    export default {
        components: {},
        oncreate() {
            this.tabs = new Set()
            this.sortable = Sortable.create(this.refs.tabBar, {
                animation: 0,
            })
        },
        data() {
            return {
                parent: null
            }  
        },
        methods: {
            openTab(view, name, icon, active = false) {
                return new Tab({
                    target: this.refs.tabBar,
                    data: {
                        icon,
                        name,
                        view,
                        active,
                        panel: this.get('parent'),
                        parent: this
                    }
                })
            },
            switchToTab(index) {
                for (const tab of this.tabs) {
                    if (tab.getIndex() === index) {
                        tab.activate()
                        return
                    }
                }
            }
        }
        
    }

</script>
