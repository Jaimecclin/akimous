<div ref:container class="container {active?'':'gone'}">
    <div id="function-doc-container">
        {#if functionDoc}
        <div ref:functionDoc id="function-doc"> {functionDoc} </div>
        {/if}
    </div>
    <div ref:splitBar id="split-bar-doc" class="split-bar"></div>
    <div id="quick-ref-container">
        {#if quickRef}
        <div ref:quickRef id="quick-ref"> {quickRef} </div>
        {/if}
    </div>

</div>

<style>
    .container {
        position: absolute;
        height: calc(100% - var(--indicator-height) - .1rem);
        width: 100%;
    }

    .split-bar {
        position: absolute;
        top: calc(var(--function-doc-height) - .4rem);
        left: 0;
        height: .9rem;
        width: 100%;
        cursor: row-resize;
        z-index: 3;
    }

    .split-bar:hover {
        background: var(--panel-delimiter-hover-color);
        background: linear-gradient(to bottom,
        transparent 30%, var(--panel-delimiter-hover-color) 30%,
        var(--panel-delimiter-hover-color) 70%,
        transparent 70%);
    }

    #function-doc-container {
        position: absolute;
        height: var(--function-doc-height);
        width: 100%;
        border-bottom: var(--panel-border);
        overflow-y: scroll;
    }

    #quick-ref-container {
        position: absolute;
        top: var(--function-doc-height);
        height: calc(100% - var(--function-doc-height) - var(--tab-bar-height));
        width: 100%;
        overflow-y: scroll;
    }
    
    #function-doc {
        white-space: pre-wrap;
        margin: .5rem;
        margin-bottom: 1rem;
    }
    
    #quick-ref {
        white-space: pre-wrap;
        margin: .5rem;
        margin-bottom: 1rem;
    }

</style>


<script>
    import g from '../lib/Globals'
    import { initializeTabView, onIdle } from '../lib/Utils'

    export default {
        components: {},
        oncreate() {
            g.docs = this
            initializeTabView(this, 'Documentation', 'fas fa-book l-red')
            onIdle(() => {
                this.refs.splitBar.onmousedown = e => {
                    e.preventDefault()
                    document.onmousemove = e => {
                        const height = (e.pageY - this.refs.container.getBoundingClientRect().y) + 'px'
                        requestAnimationFrame(() => {
                            document.documentElement.style.setProperty('--function-doc-height', height)
                        })
                    }
                }
            })
        },
        data() {
            return {
                active: false,
                quickRef: null,
                functionDoc: null,
            }
        },
        methods: {}
    }

</script>
