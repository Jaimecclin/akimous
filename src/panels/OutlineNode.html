<div ref:row on:click="jumpTo(lineNumber, display)" on:dblclick="onDoubleClick()" class="outline-node">
    <div class="line-number">{lineNumber}</div>
    {#each indents as indent}
    <div class="indent" style="background: var(--gray{indent + 1});">x</div>
    {/each}
    <div class="display {type}" style="background: var(--gray{level + 1});">{display}</div>
</div>



<style>
    .outline-node {
        height: var(--ui-line-height-default);
        line-height: var(--ui-line-height-default);
        cursor: default;
        white-space: nowrap;
        min-width: 100%;
        font-size: var(--ui-font-size-default);
        border-bottom: 1px solid var(--panel-delimiter-color);
        /* don't remove this or the font on non-retina display with Safari will become crappy. */
        background: var(--gray2);
        display: inline-flex;
    }

    .outline-node.selected {
        background: var(--ui-highlight-color);
        color: white;
    }

    .outline-node:hover {
        color: white;
        background: var(--gray3);
        filter: brightness(1.3);
    }

    .line-number {
        display: inline-block;
        background: var(--primary2);
        width: 3rem;
        height: 100%;
        text-align: right;
        padding-right: .3rem;
        font-family: var(--monospace-font-family);
    }

    .indent {
        display: inline-block;
        width: 1rem;
        height: 100%;
        color: transparent;
    }

    .display {
        display: inline-block;
        padding-left: .3rem;
        flex-grow: 1;
    }

    .display.def {
        color: var(--c-function);
    }

    .display.class {
        color: var(--c-def);
    }

    .display.async {
        color: var(--c-attribute);
    }

</style>


<script>
    import g from '../lib/Globals'
    import { setCursorAndScrollIntoView } from '../editor/EditorFunctions'

    export default {
        components: {},
        oncreate() {},
        ondestroy() {
            g.popFocus(this)
        },
        data() {
            return {
                path: '',
                display: 'test',
                lineNumber: 20,
                level: 0,
                open: true,
            }
        },
        computed: {
            indents: ({ level }) => {
                const result = []
                for (let i = 0; i < level; i++) {
                    result.push(i)
                }
                return result
            }
        },
        methods: {
            jumpTo(line, name) {
                let ch = 0
                const lineContent = g.activeEditor.cm.getLine(line)
                ch = lineContent.indexOf(name)
                setCursorAndScrollIntoView(line, ch)
            },
        }
    }

</script>
